<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>LOS:A Linux-Like Light OS Kernel &lt;操作系统内核&gt; | 老钉头のBlog</title><meta name="author" content="老钉头"><meta name="copyright" content="老钉头"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ECE 391: Guide to WFH with DockerOverviewThe intention of this local development setup is for those who prefer working at home and do not want to go through the long setup time needed with a setup scr">
<meta property="og:type" content="article">
<meta property="og:title" content="LOS:A Linux-Like Light OS Kernel &lt;操作系统内核&gt;">
<meta property="og:url" content="http://l10yx.github.io/2024/04/23/391os/index.html">
<meta property="og:site_name" content="老钉头のBlog">
<meta property="og:description" content="ECE 391: Guide to WFH with DockerOverviewThe intention of this local development setup is for those who prefer working at home and do not want to go through the long setup time needed with a setup scr">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://l10yx.github.io/img/3F7B146C-C286-4CCB-AE97-4DFD69F7EDAF_1_201_a.jpeg">
<meta property="article:published_time" content="2024-04-23T21:17:49.000Z">
<meta property="article:modified_time" content="2024-05-09T09:43:37.762Z">
<meta property="article:author" content="老钉头">
<meta property="article:tag" content="OS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://l10yx.github.io/img/3F7B146C-C286-4CCB-AE97-4DFD69F7EDAF_1_201_a.jpeg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://l10yx.github.io/2024/04/23/391os/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'LOS:A Linux-Like Light OS Kernel <操作系统内核>',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-05-09 04:43:37'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"></head><body><script>window.paceOptions = {
  restartOnPushState: false
}

document.addEventListener('pjax:send', () => {
  Pace.restart()
})
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/3F7B146C-C286-4CCB-AE97-4DFD69F7EDAF_1_201_a.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">20</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/7CFED44B-E222-4A60-B7C7-AC0195AE23D0_1_105_c.jpeg')"><nav id="nav"><span id="blog-info"><a href="/" title="老钉头のBlog"><span class="site-name">老钉头のBlog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">LOS:A Linux-Like Light OS Kernel &lt;操作系统内核&gt;</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-04-23T21:17:49.000Z" title="发表于 2024-04-23 16:17:49">2024-04-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-05-09T09:43:37.762Z" title="更新于 2024-05-09 04:43:37">2024-05-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/SDE/">SDE</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">1.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>7分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="LOS:A Linux-Like Light OS Kernel &lt;操作系统内核&gt;"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="ECE-391-Guide-to-WFH-with-Docker"><a href="#ECE-391-Guide-to-WFH-with-Docker" class="headerlink" title="ECE 391: Guide to WFH with Docker"></a>ECE 391: Guide to WFH with Docker</h1><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>The intention of this local development setup is for those who prefer working at home and do not want to go through the long setup time needed with a setup script. Just remember that everything you do with this setup will be stored on your local machine. So after doing your mp, make sure to use Git to commit your code to GitLab. The document includes the setup instruction for Windows, Mac, and Linux.</p>
<h2 id="Disclaimer"><a href="#Disclaimer" class="headerlink" title="Disclaimer"></a>Disclaimer</h2><p>While developing using this setup is supposedly the same as developing on a ECE391 lab computer, there are still chances that your code won’t work the same on it. So please run your code on a lab computer before your hand in time slot to make sure everything is working. For previously stated reason, we will not accept and demo running using this setup.</p>
<h2 id="Setup-steps"><a href="#Setup-steps" class="headerlink" title="Setup steps"></a>Setup steps</h2><h3 id="Downloading-docker-and-pulling-the-image"><a href="#Downloading-docker-and-pulling-the-image" class="headerlink" title="Downloading docker and pulling the image"></a>Downloading docker and pulling the image</h3><h4 id="Windows-Mac-Users"><a href="#Windows-Mac-Users" class="headerlink" title="Windows/Mac Users"></a>Windows/Mac Users</h4><ol>
<li>Download and install<sup><a href="#jump1">[1]</a></sup> <a target="_blank" rel="noopener" href="https://www.docker.com/products/docker-desktop/">Docker Desktop</a></li>
<li>In the image tab of Docker Desktop, search for averagefossenjoyer/ece391_docker</li>
<li>Pull the image that matches your architecture by selecting the tag<sup><a href="#jump2">[2]</a></sup><h4 id="Linux-Users"><a href="#Linux-Users" class="headerlink" title="Linux Users"></a>Linux Users</h4></li>
<li>Install Docker from your distro’s repo.<sup><a href="#jump3">[3]</a></sup></li>
<li>Start the Docker daemon.</li>
<li>docker pull averagefossenjoyer/ece391_docker:latest-amd64 or latest-arm64<h3 id="Persistent-storage"><a href="#Persistent-storage" class="headerlink" title="Persistent storage?"></a>Persistent storage?</h3>Keeping everything on Docker has its risks. If you accidentally delete the container, everything in it will be lost, including code that you did not back up to git. It is highly recommended to continue the setup with persistent storage. Follow one of the two sections below based on your choice.<br>Bottom line: <strong><em>!!PUSH OFTEN!!</em></strong></li>
</ol>
<h3 id="Starting-the-container-without-persistent-storage"><a href="#Starting-the-container-without-persistent-storage" class="headerlink" title="Starting the container without persistent storage"></a>Starting the container without persistent storage</h3><h4 id="Windows-Mac-Users-1"><a href="#Windows-Mac-Users-1" class="headerlink" title="Windows/Mac Users"></a>Windows/Mac Users</h4><ol>
<li>Click on the run button (the little triangle) next to the pulled image</li>
<li>Drop down Optional Settings</li>
<li>Under Ports put down pairs of 6901 , 8080 , and 37391<sup><a href="#jump4">[4]</a></sup></li>
<li>Press run to create and start the container<h4 id="Linux-Users-1"><a href="#Linux-Users-1" class="headerlink" title="Linux Users"></a>Linux Users</h4></li>
<li>docker run -d -p 6901:6901 -p 8080:8080 -p 37391:37391<br>averagefossenjoyer/ece391_docker<sup><a href="#jump4">[4]</a></sup><h3 id="Starting-the-container-with-persistent-storage"><a href="#Starting-the-container-with-persistent-storage" class="headerlink" title="Starting the container with persistent storage"></a>Starting the container with persistent storage</h3><h4 id="Windows-Mac-Users-2"><a href="#Windows-Mac-Users-2" class="headerlink" title="Windows/Mac Users"></a>Windows/Mac Users</h4></li>
<li>Create an empty folder, we will mount this onto the container</li>
<li>Drop down Optional Settings</li>
<li>Under Ports , put down matching pairs of 6901 , 8080 , and 37391<sup><a href="#jump4">[4]</a></sup></li>
<li>Under Volumes-&gt;Host Path , look for the folder you just created</li>
<li>Under Volumes-&gt;Container Path , put down /home/user/mount_share</li>
<li>Press run to create and start the container<h4 id="Linux-Users-2"><a href="#Linux-Users-2" class="headerlink" title="Linux Users"></a>Linux Users</h4></li>
<li>Create an empty folder, we will mount this onto the container. We will refer the absolute path of this<br>folder as ${mount_share}</li>
<li>docker run -d -p 6901:6901 -p 8080:8080 -p 37391:37391 -v ${mount_share}:/home/user/mount_share:rw averagefossenjoyer/ece391_docker<h3 id="Using-the-container"><a href="#Using-the-container" class="headerlink" title="Using the container"></a>Using the container</h3></li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th>Port</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>6901</td>
<td>VNC</td>
</tr>
<tr>
<td>37391</td>
<td>SSH</td>
</tr>
<tr>
<td>8080</td>
<td><a target="_blank" rel="noopener" href="https://github.com/coder/code-server">Code Server</a></td>
</tr>
</tbody>
</table>
</div>
<p>Simply open up localhost:6901 in your browser</p>
<h3 id="Extra-setup-with-persistent-storage"><a href="#Extra-setup-with-persistent-storage" class="headerlink" title="Extra setup with persistent storage"></a>Extra setup with persistent storage</h3><p>We will need to copy the kernel source to your persistent storage</p>
<ol>
<li>Within the container, open up a terminal</li>
<li>sudo chown user:root ~/mount_share</li>
<li>cp -pr ~/ece391/smb_share/work ~/mount_share/</li>
<li>Open up /etc/samba/smb.conf with <del>your favorite editor</del> vim or xedit if you prefer gui</li>
<li>Scroll to the bottom, comment the docker share and uncomment the mounted share to look like below:</li>
</ol>
<p>### BEGIN ECE391 CONFIG ###<br>### Docker samba share<br>#[ece391_share]<br># path = “/home/user/ece391/smb_share”<br># valid users = user<br># create mask = 0755<br># read only = no</p>
<p>### Mounted samba share<br>[ece391_share]<br>&emsp;&emsp;path = “/home/user/mount_share”<br>&emsp;&emsp;valid users = user<br>&emsp;&emsp;create mask = 0755<br>&emsp;&emsp;read only = no</p>
<ol>
<li>sudo service smbd restart</li>
</ol>
<p>Note: For consistency w.r.t. makefile, you <strong>must</strong> repeat all of these steps <strong>every time</strong> the container is destroyed (you don’t have to if you just stop it). Yes, that involves overwriting the kernel source code, and you must do any patch necessary for the MP.</p>
<h2 id="Extra-notes"><a href="#Extra-notes" class="headerlink" title="Extra notes"></a>Extra notes</h2><h3 id="What’s-the-password-for…"><a href="#What’s-the-password-for…" class="headerlink" title="What’s the password for…?"></a>What’s the password for…?</h3><ul>
<li>ece391</li>
</ul>
<h3 id="SSH-access"><a href="#SSH-access" class="headerlink" title="SSH access"></a>SSH access</h3><ul>
<li>Check ~/.ssh/config for HostName to ssh into devel/test</li>
<li>Syntax is ssh ${HostName}<h3 id="Qemu-tools-for-arm64"><a href="#Qemu-tools-for-arm64" class="headerlink" title="Qemu tools for arm64"></a>Qemu tools for arm64</h3></li>
<li>You may want access to qemu terminal, the way to do this is different for qemu 2.0</li>
<li>Instead of launching Qemu via ./devel , do it with ./devel -monitor stdio<h3 id="X-forwarding"><a href="#X-forwarding" class="headerlink" title="X-forwarding"></a>X-forwarding</h3></li>
<li>No. If you really really need it for some reason, email zongrui3@illinois.edu<h3 id="Source-Code"><a href="#Source-Code" class="headerlink" title="Source Code"></a>Source Code</h3></li>
<li>Available at <a target="_blank" rel="noopener" href="https://gitea.averagefossenjoyer.com/frank/ece391_docker">https://gitea.averagefossenjoyer.com/frank/ece391_docker</a></li>
</ul>
<ol>
<li><span id="jump1">For Windows users: During installation, you may get a prompt saying WSL is outdated. Open command prompt and type in wsl —update ↩</span></li>
<li><span id="jump2">For Windows users, it will be latest-amd64 . For Mac users, it is the same unless you have an M1/M2, then it will be latest-arm64 ↩</span></li>
<li><span id="jump3">You may want to setup <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/security/rootless/">rootless mode</a> ↩</span></li>
<li><span id="jump4">You may change the port mapping as you wish. It is recommended to keep it the same for ease of remembering. ↩ ↩ ↩ ↩</span></li>
</ol>
<h1 id="Working-on-Illinix-391"><a href="#Working-on-Illinix-391" class="headerlink" title="Working on Illinix 391"></a>Working on Illinix 391</h1><h2 id="14-Appendix-G-Troubleshooting"><a href="#14-Appendix-G-Troubleshooting" class="headerlink" title="14 Appendix G: Troubleshooting"></a>14 Appendix G: Troubleshooting</h2><h3 id="14-1-Debugging-with-QEMU"><a href="#14-1-Debugging-with-QEMU" class="headerlink" title="14.1 Debugging with QEMU"></a>14.1 Debugging with QEMU</h3><p>This section describes how to build your new OS which will be embedded, together with the filesys img, in mp3.img.<br>Wheneverachangeismadetoyourkernelorfilesystem,youneedtosudo makeanewkernel,whichconsequently prepares the mp3.img file which is used in the newly modified test debug.lnk file.<br>Your new test debug.lnk file should be modified to pass the new mp3 QEMU image. Change the target line to </p>
<blockquote>
<p>“c:\qemu-1.5.0-win32-sdl\qemu-system-i386w.exe” -hda “<mp3 directory>\mp3.img” -m 256 -gdb tcp:127.0.0.1:1234 -S -name mp3</p>
</blockquote>
<p>You may also write the following to a .bat file to accomplish the same thing:</p>
<blockquote>
<p>c:<br>cd “c:\qemu-1.5.0-win32-sdl\”<br>qemu-system-i386w.exe -hda <mp3 directory>\mp3.img -m 256 -gdb tcp:127.0.0.1:1234 -S -name mp3</p>
</blockquote>
<p>where <mp3 directory> is likely to be: z:\mp3\student-distrib. In order to start debugging with GDB, run your test debug.lnk file, then issue the following commands in the development machine:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> &lt;mp3 directory&gt;/student-distrib </span><br><span class="line">gdb bootimg</span><br><span class="line">target remote 10.0.2.2:1234</span><br></pre></td></tr></table></figure><br>GDB should now be started and connected to QEMU. From here, you can set up break points and everything else that you would normally do with GDB. Type c to continue execution instead of r since you connected to QEMU which is already running. When you do continue execution in GDB, GRUB will load first in QEMU. You need to hit enter, or wait 5 seconds, for your OS to load. QEMU is known to crash if your page tables are incorrectly setup. You might have to use the task manager in Windows to kill QEMU if this happens.</p>
<h3 id="14-2-mnt-tmpmp3-Compile-Error"><a href="#14-2-mnt-tmpmp3-Compile-Error" class="headerlink" title="14.2 /mnt/tmpmp3 Compile Error"></a>14.2 /mnt/tmpmp3 Compile Error</h3><p>When compiling your kernel in MP3, you must first close the test machine. If you forget to close the test machine while compiling, or forget to run as root when you make, you will need to remove the old MP3 image before you can compile again. The commands below can be added to a script to remove the broken files and correct the issue (the last command should be run in git-bash).<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">rm</span> -rf /mnt/tmpmp3</span><br><span class="line"><span class="built_in">rm</span> bootimg</span><br><span class="line"><span class="built_in">rm</span> mp3.img</span><br><span class="line">git checkout mp3.img</span><br></pre></td></tr></table></figure><br>If you run the above steps and you still can’t compile, the mp3.img in your repo is broken. You will need to re- vert back to an earlier version of mp3.img or you will need to grab a fresh mp3.img from the class directory under mp3/student-distrib.</p>
<h3 id="14-3-Buffer-I-O-error-on-device-loop0-logical-block-lost-page-write-due-to-I-O-error-on-loop0"><a href="#14-3-Buffer-I-O-error-on-device-loop0-logical-block-lost-page-write-due-to-I-O-error-on-loop0" class="headerlink" title="14.3 Buffer I/O error on device loop0, logical block #### lost page write due to I/O error on loop0"></a>14.3 Buffer I/O error on device loop0, logical block #### lost page write due to I/O error on loop0</h3><p>While this error may be caused by many issues, it’s likely it was caused by an mp3.img corruption. Follow the above steps to attempt a fix.</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://L10yx.github.io">老钉头</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://l10yx.github.io/2024/04/23/391os/">http://l10yx.github.io/2024/04/23/391os/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://L10yx.github.io" target="_blank">老钉头のBlog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/OS/">OS</a></div><div class="post_share"><div class="social-share" data-image="/img/3F7B146C-C286-4CCB-AE97-4DFD69F7EDAF_1_201_a.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/04/23/mdp/" title="马尔科夫决策过程"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">马尔科夫决策过程</div></div></a></div><div class="next-post pull-right"><a href="/2024/04/23/redisbasics/" title="Redis入门"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Redis入门</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/3F7B146C-C286-4CCB-AE97-4DFD69F7EDAF_1_201_a.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">老钉头</div><div class="author-info__description">A ZJUer majored in CompE</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">20</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/L10yx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/L10yx" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:yuxuanl.21@intl.zju.edu.cn" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎光临老钉头的博客！这里会不定期分享我在学习和工作中收集、整理和总结的信息，以及个人思考。<br>请注意，部分内容可能来源于互联网。若涉及版权问题，请及时与我联系，我将尽快处理相关内容！同时，对于任何其他问题或建议，也非常欢迎您与我交流讨论 :)<br>yuxuanl.21@intl.zju.edu.cn</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ECE-391-Guide-to-WFH-with-Docker"><span class="toc-number">1.</span> <span class="toc-text">ECE 391: Guide to WFH with Docker</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Overview"><span class="toc-number">1.1.</span> <span class="toc-text">Overview</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Disclaimer"><span class="toc-number">1.2.</span> <span class="toc-text">Disclaimer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Setup-steps"><span class="toc-number">1.3.</span> <span class="toc-text">Setup steps</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Downloading-docker-and-pulling-the-image"><span class="toc-number">1.3.1.</span> <span class="toc-text">Downloading docker and pulling the image</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Windows-Mac-Users"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">Windows&#x2F;Mac Users</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Linux-Users"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">Linux Users</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Persistent-storage"><span class="toc-number">1.3.2.</span> <span class="toc-text">Persistent storage?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Starting-the-container-without-persistent-storage"><span class="toc-number">1.3.3.</span> <span class="toc-text">Starting the container without persistent storage</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Windows-Mac-Users-1"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">Windows&#x2F;Mac Users</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Linux-Users-1"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">Linux Users</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Starting-the-container-with-persistent-storage"><span class="toc-number">1.3.4.</span> <span class="toc-text">Starting the container with persistent storage</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Windows-Mac-Users-2"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">Windows&#x2F;Mac Users</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Linux-Users-2"><span class="toc-number">1.3.4.2.</span> <span class="toc-text">Linux Users</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Using-the-container"><span class="toc-number">1.3.5.</span> <span class="toc-text">Using the container</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Extra-setup-with-persistent-storage"><span class="toc-number">1.3.6.</span> <span class="toc-text">Extra setup with persistent storage</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Extra-notes"><span class="toc-number">1.4.</span> <span class="toc-text">Extra notes</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#What%E2%80%99s-the-password-for%E2%80%A6"><span class="toc-number">1.4.1.</span> <span class="toc-text">What’s the password for…?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SSH-access"><span class="toc-number">1.4.2.</span> <span class="toc-text">SSH access</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Qemu-tools-for-arm64"><span class="toc-number">1.4.3.</span> <span class="toc-text">Qemu tools for arm64</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#X-forwarding"><span class="toc-number">1.4.4.</span> <span class="toc-text">X-forwarding</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Source-Code"><span class="toc-number">1.4.5.</span> <span class="toc-text">Source Code</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Working-on-Illinix-391"><span class="toc-number">2.</span> <span class="toc-text">Working on Illinix 391</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#14-Appendix-G-Troubleshooting"><span class="toc-number">2.1.</span> <span class="toc-text">14 Appendix G: Troubleshooting</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-1-Debugging-with-QEMU"><span class="toc-number">2.1.1.</span> <span class="toc-text">14.1 Debugging with QEMU</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-2-mnt-tmpmp3-Compile-Error"><span class="toc-number">2.1.2.</span> <span class="toc-text">14.2 &#x2F;mnt&#x2F;tmpmp3 Compile Error</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-3-Buffer-I-O-error-on-device-loop0-logical-block-lost-page-write-due-to-I-O-error-on-loop0"><span class="toc-number">2.1.3.</span> <span class="toc-text">14.3 Buffer I&#x2F;O error on device loop0, logical block #### lost page write due to I&#x2F;O error on loop0</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/09/gnn/" title="图神经网络 GNN">图神经网络 GNN</a><time datetime="2024-05-09T09:39:47.000Z" title="发表于 2024-05-09 04:39:47">2024-05-09</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/02/nlp/" title="nlp">nlp</a><time datetime="2024-05-02T09:32:50.000Z" title="发表于 2024-05-02 04:32:50">2024-05-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/02/cs440/" title="Artificial Intelligence UIUC-CS440">Artificial Intelligence UIUC-CS440</a><time datetime="2024-05-02T06:45:56.000Z" title="发表于 2024-05-02 01:45:56">2024-05-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/04/30/RL/" title="Reinforcement Learning">Reinforcement Learning</a><time datetime="2024-04-30T19:59:54.000Z" title="发表于 2024-04-30 14:59:54">2024-04-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/04/29/game/" title="Game Development UIUC-CS415">Game Development UIUC-CS415</a><time datetime="2024-04-30T01:18:20.000Z" title="发表于 2024-04-29 20:18:20">2024-04-29</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2024 By 老钉头</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>