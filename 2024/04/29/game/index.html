<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Game Development UIUC CS415 | 老钉头のBlog</title><meta name="author" content="老钉头"><meta name="copyright" content="老钉头"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="AnimationGeometric TransformationsThe geometry of a mesh is defined by the vertex setApplying a transformation to a mesh means transforming each vertex locationSimple transformations can be accomplish">
<meta property="og:type" content="article">
<meta property="og:title" content="Game Development UIUC CS415">
<meta property="og:url" content="http://l10yx.github.io/2024/04/29/game/index.html">
<meta property="og:site_name" content="老钉头のBlog">
<meta property="og:description" content="AnimationGeometric TransformationsThe geometry of a mesh is defined by the vertex setApplying a transformation to a mesh means transforming each vertex locationSimple transformations can be accomplish">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://l10yx.github.io/img/3F7B146C-C286-4CCB-AE97-4DFD69F7EDAF_1_201_a.jpeg">
<meta property="article:published_time" content="2024-04-30T01:18:20.000Z">
<meta property="article:modified_time" content="2024-04-30T18:50:22.987Z">
<meta property="article:author" content="老钉头">
<meta property="article:tag" content="CG">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://l10yx.github.io/img/3F7B146C-C286-4CCB-AE97-4DFD69F7EDAF_1_201_a.jpeg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://l10yx.github.io/2024/04/29/game/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Game Development UIUC CS415',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-04-30 13:50:22'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"></head><body><script>window.paceOptions = {
  restartOnPushState: false
}

document.addEventListener('pjax:send', () => {
  Pace.restart()
})
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/3F7B146C-C286-4CCB-AE97-4DFD69F7EDAF_1_201_a.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/7CFED44B-E222-4A60-B7C7-AC0195AE23D0_1_105_c.jpeg')"><nav id="nav"><span id="blog-info"><a href="/" title="老钉头のBlog"><span class="site-name">老钉头のBlog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Game Development UIUC CS415</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-04-30T01:18:20.000Z" title="发表于 2024-04-29 20:18:20">2024-04-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-04-30T18:50:22.987Z" title="更新于 2024-04-30 13:50:22">2024-04-30</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/SDE/">SDE</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">3.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>21分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Game Development UIUC CS415"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Animation"><a href="#Animation" class="headerlink" title="Animation"></a>Animation</h1><h2 id="Geometric-Transformations"><a href="#Geometric-Transformations" class="headerlink" title="Geometric Transformations"></a>Geometric Transformations</h2><p>The geometry of a mesh is defined by the vertex set<br>Applying a transformation to a mesh means transforming each vertex location<br>Simple transformations can be accomplished by multiplying a matrix times the vertex location</p>
<ul>
<li>Rotation</li>
<li>Scale</li>
<li>Translation<script type="math/tex; mode=display">
\begin{bmatrix}
d & e & f & a \\
g & h & i & b \\
j & k & l & c \\
0 & 0 & 0 & 1
\end{bmatrix}
\begin{bmatrix}
x \\
y \\
z \\
1
\end{bmatrix}</script></li>
</ul>
<p>3 dimensional transformations are implemented as a 4x4 matrix</p>
<ul>
<li>We express the 3D position of a point using homogeneous coordinates…add a fourth w coordinate</li>
<li>Each 3D position (x,y,z) corresponds to a homogeneous point (x,y,z,1)</li>
</ul>
<h3 id="3-D-Affine-Transformations"><a href="#3-D-Affine-Transformations" class="headerlink" title="3-D Affine Transformations"></a>3-D Affine Transformations</h3><p>General Form (with homogeneous coordinates)</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
d & e & f & a \\
g & h & i & b \\
j & k & l & c \\
0 & 0 & 0 & 1
\end{bmatrix}
\begin{bmatrix}
x \\
y \\
z \\
1
\end{bmatrix}
=
\begin{bmatrix}
dx + ey + fz + a \\
gx + hy + iz + b \\
jx + ky + lz + c \\
1
\end{bmatrix}</script><h3 id="Translation"><a href="#Translation" class="headerlink" title="Translation"></a>Translation</h3><script type="math/tex; mode=display">
\mathbf{T}(\mathbf{t}) = \mathbf{T}(t_x, t_y, t_z) =
\begin{bmatrix}
1 & 0 & 0 & t_x \\
0 & 1 & 0 & t_y \\
0 & 0 & 1 & t_z \\
0 & 0 & 0 & 1
\end{bmatrix}</script><p><img src="/imgs/CS415/w10.10.png" alt=""><br>The inverse of a translation matrix is $T^{−1}(t) = T(−t)$, that is, the vector t is negated.</p>
<h3 id="Scale"><a href="#Scale" class="headerlink" title="Scale"></a>Scale</h3><p><img src="/imgs/CS415/w10.11.png" alt=""></p>
<h3 id="2-D-Rotations-It’s-Not-Magic"><a href="#2-D-Rotations-It’s-Not-Magic" class="headerlink" title="2-D Rotations: It’s Not Magic"></a>2-D Rotations: It’s Not Magic</h3><p><img src="/imgs/CS415/w10.12.png" alt="">Real-Time Rendering, Fourth Edition (Page 60).</p>
<h3 id="3-D-Rotations"><a href="#3-D-Rotations" class="headerlink" title="3-D Rotations"></a>3-D Rotations</h3><p>About x-axis</p>
<ul>
<li>rotates y to z</li>
</ul>
<script type="math/tex; mode=display">
\mathbf{R}_x(\phi) = 
\begin{bmatrix}
1 & 0 & 0 & 0 \\
0 & \cos \phi & -\sin \phi & 0 \\
0 & \sin \phi & \cos \phi & 0 \\
0 & 0 & 0 & 1
\end{bmatrix}</script><p>About y-axis</p>
<ul>
<li>rotates z to x</li>
</ul>
<script type="math/tex; mode=display">
\mathbf{R}_y(\phi) = 
\begin{bmatrix}
\cos \phi & 0 & \sin \phi & 0 \\
0 & 1 & 0 & 0 \\
-\sin \phi & 0 & \cos \phi & 0 \\
0 & 0 & 0 & 1
\end{bmatrix}</script><p>About z-axis</p>
<ul>
<li>rotates x to y</li>
</ul>
<script type="math/tex; mode=display">
\mathbf{R}_z(\phi) = 
\begin{bmatrix}
\cos \phi & -\sin \phi & 0 & 0 \\
\sin \phi & \cos \phi & 0 & 0 \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1
\end{bmatrix}</script><p>Rotations do not commute!</p>
<ul>
<li>Rotation is around the origin</li>
<li>To rotate around a point p we have to: translate p to origin, rotate, translate back to p</li>
<li>Example:<img src="/imgs/CS415/w10.14.png" alt=""></li>
</ul>
<h3 id="Concatenating-Transformations"><a href="#Concatenating-Transformations" class="headerlink" title="Concatenating Transformations"></a>Concatenating Transformations</h3><p>You can execute a sequence of transformations using a single matrix </p>
<script type="math/tex; mode=display">M_{n} M_{n-1} ... M_2 M_1 p = Mp</script><p>Just compute the product of the transformation matrices<br>Important $M_1$ is applied first then $M_2$ and so on</p>
<ul>
<li><strong>Modeling transformation</strong>: model is sized, placed and oriented in the virtual world <script type="math/tex; mode=display">C = TRS</script><script type="math/tex; mode=display">TRSp = T(R(Sp))</script></li>
</ul>
<h3 id="Non-Commutativity-Example"><a href="#Non-Commutativity-Example" class="headerlink" title="Non-Commutativity Example"></a>Non-Commutativity Example</h3><p><img src="/imgs/CS415/w10.15.png" alt=""><br>It generally holds that $MN != NM$, for arbitrary matrices $M$ and $N$.</p>
<h3 id="Use-in-Rigging"><a href="#Use-in-Rigging" class="headerlink" title="Use in Rigging"></a>Use in Rigging</h3><blockquote>
<p>3D rigging is the process of creating a skeleton for a 3D model so it can move. Most commonly, characters are rigged before they are animated because if a character model doesn’t have a rig, they can’t be deformed and moved around.</p>
</blockquote>
<p>Each joint has a transformation associated with it<br>The rigging skeleton generates a tree of transformations<br>So, fingers are transformed a concatenated transform<br>Product of matrices from the chest to shoulder to elbow to wrist, etc.</p>
<h2 id="Orientation-Euler-Angles"><a href="#Orientation-Euler-Angles" class="headerlink" title="Orientation: Euler Angles"></a>Orientation: Euler Angles</h2><h3 id="Instancing"><a href="#Instancing" class="headerlink" title="Instancing"></a>Instancing</h3><p>Vegetation instancing.<br>All objects the same color in the lower image are rendered in a single draw call.<br>You render the same number of triangles as non-instancing…<br>So why is instancing more performant than using more meshes?</p>
<h3 id="Animation-and-Orientation"><a href="#Animation-and-Orientation" class="headerlink" title="Animation and Orientation"></a>Animation and Orientation</h3><p>Interpolation is used to generate in-between frames from keyframes<br>At a minimum this means interpolating position and orientation of a model<br>So…how can we represent orientation?</p>
<h3 id="Orientation"><a href="#Orientation" class="headerlink" title="Orientation"></a>Orientation</h3><p>A model has an initial geometry (from the artist)<br>Changing that orientation requires rotation<br>How about just using a single rotation matrix?</p>
<p>Consider a 2D example</p>
<ul>
<li>Starting rotation is 90 degree clockwise</li>
<li>Ending rotation is 90 degree counter-clockwise</li>
<li><p>Doing element-by-element linear interpolation to get intermediate rotation</p>
<script type="math/tex; mode=display">
\frac{1}{2}
\begin{bmatrix}
0 & 1 \\
-1 & 0
\end{bmatrix}
+
\frac{1}{2}
\begin{bmatrix}
0 & -1 \\
1 & 0
\end{bmatrix}
=
\begin{bmatrix}
0 & 0 \\
0 & 0
\end{bmatrix}</script></li>
<li><p>Does this make sense? Should we have expected something different?</p>
</li>
</ul>
<h4 id="Euler-Angles"><a href="#Euler-Angles" class="headerlink" title="Euler Angles"></a>Euler Angles</h4><p>We can record an orientation as</p>
<ul>
<li>Three rotations</li>
<li>Each rotation is around a principal axis</li>
<li><p>Example: <script type="math/tex">\mathbf{E}(h, p, r) = \mathbf{R}_z(r) \mathbf{R}_x(p) \mathbf{R}_y(h)</script></p>
</li>
<li><p>This not only option</p>
<ul>
<li>24 different possible orders one could use</li>
</ul>
</li>
<li>Also, people use different terminology<ul>
<li>e.g. “yaw” instead of “head”</li>
<li>Also which axis corresponds to a name is not standardized</li>
</ul>
</li>
</ul>
<p><img src="/imgs/CS415/w10.3.png" alt=""></p>
<p><strong>The Good Part:</strong></p>
<ul>
<li>Three Euler angles can be used to specify arbitrary object orientation<ul>
<li>i.e. any orientation we want can be achieved with these 3 rotations</li>
</ul>
</li>
<li>Euler angles are used in a lot of applications…they are believed to be intuitive</li>
<li>They are compact…requiring only 3 numbers </li>
<li>Easily converted into a single rotation matrix</li>
</ul>
<p><strong>The Problematic Parts:</strong><br>Are they really intuitive?<br><img src="/imgs/CS415/w10.4.png" alt=""><br>Each rotation is given in a new coordinate system<br>Plus, different triples can be used to generate the same orientation</p>
<h4 id="Gimbal-Lock"><a href="#Gimbal-Lock" class="headerlink" title="Gimbal Lock"></a>Gimbal Lock</h4><p>环架锁定（Gimbal lock），也称为万向锁，是使用动态欧拉角表示三维物体的旋转时会出现的问题。<br>Airplane orientation</p>
<ul>
<li><script type="math/tex; mode=display">R_z(roll) R_x(pitch) R_y(yaw)</script></li>
<li>Two axes have collapsed onto each other</li>
<li>Think about this from a user-interface perspective</li>
</ul>
<p>Imagine you have 3 dials…one for each angle<br>What action caused the orientation you see?<br>What happens when z dial is moved now?<br>What problem could this cause for someone playing a game with this interface? <img src="/imgs/CS415/w10.5.png" alt=""></p>
<p>When the <code>middle</code> rotation is a 90 or -90 rotation, we generate gimbal lock<br>In this example, gimbal lock occurs when a 90 degree turn around axis Z is made<br>Both X and Y rotations are now performed around the same axis<br><img src="/imgs/CS415/w10.6.png" alt=""></p>
<p>Is Gimbal Lock that Important?</p>
<blockquote>
<p>“In the video game industry there has been some back-and-forth battles about whether this problem is crucial. In an FPS game, the avatar is usually not allowed to pitch his head all the way to ±π/2, thereby avoiding this problem. In VR, it happens all the time that a user could pitch her head straight up or down. The kinematic singularity often causes the viewpoint to spin uncontrollably…”<br>— Virtual Reality by Lavalle Section 3.3</p>
</blockquote>
<h4 id="Interpolation"><a href="#Interpolation" class="headerlink" title="Interpolation"></a>Interpolation</h4><p>Could linearly interpolate between each angle in a start pose and end pose to generate intermediate poses</p>
<ul>
<li>This doesn’t work well</li>
</ul>
<p>It treats rotations as if they were independent of each other and completely ignores the effect they have on each other</p>
<ul>
<li>Can result in jerky, unnatural movement</li>
</ul>
<h2 id="Orientation-Quaternions-四元数"><a href="#Orientation-Quaternions-四元数" class="headerlink" title="Orientation: Quaternions 四元数"></a>Orientation: Quaternions 四元数</h2><ul>
<li>Alternative way of encoding orientation</li>
<li>Game industry standard</li>
<li>Both Unity and Unreal use them</li>
<li><p>User interface may still use Euler Angles</p>
<ul>
<li>Converted to quaternions under the hood</li>
</ul>
</li>
<li><p>Developed by Sir William Rowan Hamilton [1843]</p>
</li>
<li><p>Quaternions are 4-D complex numbers with one real axis and three imaginary axes: $i,j,k$</p>
<script type="math/tex; mode=display">q = q_0 + iq_1 + jq_2 + kq_3</script></li>
<li><p>Introduced to Computer Graphics by Shoemake [1985]</p>
</li>
<li>Given an angle and axis, easy to convert to and from quaternion<ul>
<li>Euler angle conversion to and from arbitrary axis and angle difficult</li>
</ul>
</li>
<li>Quaternions allow stable and constant interpolation of orientations<ul>
<li>Cannot be done easily with Euler angles</li>
</ul>
</li>
</ul>
<h3 id="Unit-Quaternions"><a href="#Unit-Quaternions" class="headerlink" title="Unit Quaternions"></a>Unit Quaternions</h3><p>For convenience, we will use only unit length quaternions</p>
<script type="math/tex; mode=display">|q| = \sqrt{q_0^2 + q_1^2 + q_2^2 + q_3^2} = 1</script><ul>
<li>These correspond to the set of 4D vectors </li>
<li>They form the ‘surface’ of a 4D hypersphere of radius 1</li>
</ul>
<h3 id="Quaternions-as-Rotations"><a href="#Quaternions-as-Rotations" class="headerlink" title="Quaternions as Rotations"></a>Quaternions as Rotations</h3><p>A quaternion can represent a rotation by angle θ around a unit vector a:</p>
<script type="math/tex; mode=display">\pmb{q} = [ cos \frac{\theta}{2} \quad  a_x sin \frac{\theta}{2} \quad  a_y sin \frac{\theta}{2} \quad a_z sin \frac{\theta}{2} ]</script><p>or</p>
<script type="math/tex; mode=display">\pmb{q} = \langle  cos \frac{\theta}{2} \quad \pmb{a} sin \frac{\theta}{2} \rangle</script><p>If $\pmb{a}$ is unit length, then $\pmb{q}$ will be also</p>
<h3 id="Rotation-using-Quaternions"><a href="#Rotation-using-Quaternions" class="headerlink" title="Rotation using Quaternions"></a>Rotation using Quaternions</h3><ul>
<li>Let $q = \cos\left(\frac{\theta}{2}\right) + \sin\left(\frac{\theta}{2}\right) \mathbf{u}$ be a unit quaternion: $|q| = |\mathbf{u}| = 1$</li>
<li>Let point $\mathbf{p} = (x,y,z) = xi + yj + zk$</li>
<li>Then the product $q \mathbf{p} q^{-1}$ rotates the point $\mathbf{p}$ about axis $\mathbf{u}$ by angle $\theta$</li>
<li>Inverse of a unit quaternion is its <em>conjugate</em><ul>
<li>…just negate the imaginary part</li>
</ul>
</li>
<li>$q^{-1} = \left(\cos\left(\frac{\theta}{2}\right) + \sin\left(\frac{\theta}{2}\right) \mathbf{u}\right)^{-1} = \cos\left(-\frac{\theta}{2}\right) + \sin\left(-\frac{\theta}{2}\right) \mathbf{u} = \cos\left(\frac{\theta}{2}\right) - \sin\left(\frac{\theta}{2}\right) \mathbf{u}$</li>
<li>Composition of rotations $q_{12} = q_1 q_2 \neq q_2 q_1$</li>
</ul>
<h3 id="Quaternion-to-Matrix"><a href="#Quaternion-to-Matrix" class="headerlink" title="Quaternion to Matrix"></a>Quaternion to Matrix</h3><p>To convert a quaternion to a rotation matrix:</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
1 - 2q_2^2 - 2q_3^2 & 2q_1q_2 + 2q_0q_3 & 2q_1q_3 - 2q_0q_2 \\
2q_1q_2 - 2q_0q_3 & 1 - 2q_1^2 - 2q_3^2 & 2q_2q_3 + 2q_0q_1 \\
2q_1q_3 + 2q_0q_2 & 2q_2q_3 - 2q_0q_1 & 1 - 2q_1^2 - 2q_2^2
\end{bmatrix}</script><h3 id="Matrix-to-Quaternion"><a href="#Matrix-to-Quaternion" class="headerlink" title="Matrix to Quaternion"></a>Matrix to Quaternion</h3><p>Matrix to quaternion is not hard</p>
<ul>
<li>it involves a few ‘if’ statements,</li>
<li>a square root,</li>
<li>three divisions,</li>
<li>and some other stuff</li>
</ul>
<p><code>tr(M)</code> is the trace</p>
<ul>
<li>sum of the diagonal elements</li>
</ul>
<script type="math/tex; mode=display">
q_0 = \frac{1}{2} \sqrt{tr(M)}</script><script type="math/tex; mode=display">
q_1 = \frac{m_{21} - m_{12}}{4q_0}</script><script type="math/tex; mode=display">
q_2 = \frac{m_{02} - m_{20}}{4q_0}</script><script type="math/tex; mode=display">
q_3 = \frac{m_{10} - m_{01}}{4q_0}</script><blockquote>
<p>This assumes $ M $ is a 4x4 homogeneous rotation matrix…so the diagonal ends with a 1</p>
</blockquote>
<h3 id="Quaternion-Dot-Products"><a href="#Quaternion-Dot-Products" class="headerlink" title="Quaternion Dot Products"></a>Quaternion Dot Products</h3><p>The dot product of two quaternions:</p>
<script type="math/tex; mode=display">
\mathbf{p} \cdot \mathbf{q} = p_0q_0 + p_1q_1 + p_2q_2 + p_3q_3 = |\mathbf{p}||\mathbf{q}|\cos\phi</script><p>The angle between two quaternions in 4D space is <code>half</code> the angle one would need to rotate from one orientation to the other in 3D space.</p>
<h3 id="Quaternion-Multiplication"><a href="#Quaternion-Multiplication" class="headerlink" title="Quaternion Multiplication"></a>Quaternion Multiplication</h3><p>We can perform multiplication on quaternions</p>
<ul>
<li>we expand them into their complex number form</li>
</ul>
<script type="math/tex; mode=display">
\mathbf{q} = q_0 + iq_1 + jq_2 + kq_3</script><p>If $ \mathbf{q}=(s,\mathbf{v}) $ represents a rotation and $\mathbf{q’=}(s’,\mathbf{v}’) $represents a rotation,<br>$\mathbf{qq’}$ represents $\mathbf{q}$ rotated by $\mathbf{q’}$</p>
<p>This follows very similar rules as matrix multiplication (i.e., non-commutative)</p>
<script type="math/tex; mode=display">
\mathbf{qq'} = (q_0 + iq_1 + jq_2 + kq_3)(q_0' + iq_1' + jq_2' + kq_3')</script><script type="math/tex; mode=display">
= \langle ss' - \mathbf{v} \times \mathbf{v}', s\mathbf{v}' + s'\mathbf{v} + \mathbf{v} \times \mathbf{v}' \rangle</script><blockquote>
<p>It’s just like multiplying 2 rotation matrices together…</p>
</blockquote>
<p>Two unit quaternions multiplied together results in another unit quaternion<br>This corresponds to the same property of complex numbers<br>Remember(?) multiplication by complex numbers is like a rotation in the complex plane<br>Quaternions extend the planar rotations of complex numbers to 3D rotations in space</p>
<h3 id="Linear-Interpolation"><a href="#Linear-Interpolation" class="headerlink" title="Linear Interpolation"></a>Linear Interpolation</h3><ul>
<li>If we want to do a linear interpolation between two points <strong>a</strong> and <strong>b</strong> in normal space:</li>
</ul>
<script type="math/tex; mode=display">
\text{Lerp}(t, \mathbf{a}, \mathbf{b}) = (1-t)\mathbf{a} + t\mathbf{b}</script><p>where $t$ ranges from 0 to 1.</p>
<ul>
<li><p>Note that the Lerp operation can be thought of as a weighted average (convex).</p>
</li>
<li><p>We could also write it in its additive blend form:</p>
</li>
</ul>
<script type="math/tex; mode=display">
\text{Lerp}(t, \mathbf{a}, \mathbf{b}) = \mathbf{a} + t(\mathbf{b}-\mathbf{a})</script><h3 id="Spherical-Linear-Interpolation"><a href="#Spherical-Linear-Interpolation" class="headerlink" title="Spherical Linear Interpolation"></a>Spherical Linear Interpolation</h3><ul>
<li>If we want to interpolate between two points on a sphere (or hypersphere), we do not just want to Lerp between them</li>
<li>Instead, we will travel across the surface of the sphere by following a ‘great arc’<br><img src="/imgs/CS415/w10.7.png" alt=""></li>
</ul>
<ul>
<li>The spherical linear interpolation of two unit quaternions <strong>a</strong> and <strong>b</strong> is:</li>
</ul>
<script type="math/tex; mode=display">
\text{Slerp}(t, \mathbf{a}, \mathbf{b}) = \frac{\sin((1-t)\theta)}{\sin \theta}\mathbf{a} + \frac{\sin(t\theta)}{\sin \theta}\mathbf{b}</script><p>where:</p>
<ul>
<li>$\theta = \cos^{-1}(\mathbf{a} \cdot \mathbf{b})$</li>
</ul>
<h3 id="Quaternion-Interpolation"><a href="#Quaternion-Interpolation" class="headerlink" title="Quaternion Interpolation"></a>Quaternion Interpolation</h3><p><img src="/imgs/CS415/w10.8.png" alt=""></p>
<ul>
<li>Useful for animating objects between two poses</li>
<li>Not useful for all camera orientations<ul>
<li>up vector can become tilted and annoy viewers</li>
<li>depends on application</li>
</ul>
</li>
<li>Interpolated path through SLERP rotates<ul>
<li>around a fixed axis</li>
<li>at a constant speed</li>
<li>so, no acceleration</li>
</ul>
</li>
</ul>
<p>If we want to interpolate through a series of orientations $\mathbf{q_1}, \mathbf{q_2}, \ldots, \mathbf{q_n}$, is SLERP a good choice?</p>
<h3 id="Chained-Quaternion-Interpolation"><a href="#Chained-Quaternion-Interpolation" class="headerlink" title="Chained Quaternion Interpolation"></a>Chained Quaternion Interpolation</h3><blockquote>
<p>When more than two orientations, say <script type="math/tex">q_0, q_1, ..., q_{n-1}</script>, are available, and we want to interpolate from <script type="math/tex">q_0</script> to <script type="math/tex">q_1</script> to <script type="math/tex">q_2</script>, and so on until <script type="math/tex">q_{n-1}</script>, SLERP can be used in a straightforward fashion. However, using <script type="math/tex">q_{i-1}</script> and <script type="math/tex">q_i</script> as arguments to SLERP, and then <script type="math/tex">q_i</script> and <script type="math/tex">q_{i+1}</script> as subsequent arguments, can cause sudden jerks to appear in the orientation.</p>
</blockquote>
<ul>
<li><strong>Can smooth the path by using a spherical curve instead of a straight line</strong></li>
</ul>
<blockquote>
<p>A better way to interpolate is to use some sort of spline. We introduce quaternions <script type="math/tex">\hat{a}_i</script> and <script type="math/tex">\hat{a}_{i+1}</script> between <script type="math/tex">q_i</script> and <script type="math/tex">q_{i+1}</script>. Spherical cubic interpolation can be defined within the set of quaternions <script type="math/tex">q_i, \hat{a}_i, \hat{a}_{i+1},</script> and <script type="math/tex">q_{i+1}</script>. Surprisingly, these extra quaternions are computed as shown below:</p>
</blockquote>
<script type="math/tex; mode=display">
\hat{a}_i = q_i \exp\left(\frac{\log(q_{i-1}^{-1} q_i) + \log(q_i^{-1} q_{i+1})}{4}\right)</script><p>The interpolation function, <strong>SQUAD</strong> (Spherical Quadrangle Interpolation), is defined as:</p>
<script type="math/tex; mode=display">
\text{squad}(q_i, q_{i+1}, \hat{a}_i, \hat{a}_{i+1}, t) = \text{slerp}(\text{slerp}(q_i, q_{i+1}, t), \text{slerp}(\hat{a}_i, \hat{a}_{i+1}, t), 2t(1 - t))</script><p>This approach allows for a smooth transition between quaternions, minimizing abrupt changes in orientation.</p>
<h3 id="Interpolating-Quaternions-The-Hack"><a href="#Interpolating-Quaternions-The-Hack" class="headerlink" title="Interpolating Quaternions: The Hack"></a>Interpolating Quaternions: The Hack</h3><p>Interpolating quaternions should be done on the surface of a 3D unit sphere embedded in 4D space.<br>However, much simpler interpolation along a 4D straight line (open circles) followed by reprojection of the results onto the sphere (black circles) is often sufficient.<br><img src="/imgs/CS415/w10.9.png" alt=""></p>
<h3 id="T-F"><a href="#T-F" class="headerlink" title="T/F"></a>T/F</h3><ul>
<li>(T) Any orientation expressed as a quaternion can be expressed using Euler angles.</li>
<li>(T) An Euler angle representation of an orientation uses less data than a quaternion representation.</li>
<li>(F) The three axes used for the Euler angle representation must be unique. For example, using the X axis, then the Y axis and then the X axis would not work.</li>
<li>(T) Changing the order of rotation can affect the result. For example, switching from an XYZ order to a YXZ order may change the orientation even if the three angles remain the same.</li>
</ul>
<h1 id="Game-Physics"><a href="#Game-Physics" class="headerlink" title="Game Physics"></a>Game Physics</h1><h2 id="Simple-Physics-Engine"><a href="#Simple-Physics-Engine" class="headerlink" title="Simple Physics Engine"></a>Simple Physics Engine</h2><h3 id="The-Timestep"><a href="#The-Timestep" class="headerlink" title="The Timestep"></a>The Timestep</h3><p>How does the timestep effect the accuracy of the engine?<br>How would you see that error in a game?<br>Timestep in games uses wall-clock time (sometimes a scaled version)</p>
<ul>
<li>Also related to framerate</li>
</ul>
<p>If the physics timestep is tied to the framerate, what can happen?</p>
<h3 id="UE-Substepping"><a href="#UE-Substepping" class="headerlink" title="UE Substepping"></a>UE Substepping</h3><p>In UE look at Project Settings &gt; Engine &gt; Physics</p>
<ul>
<li>Substepping creates a degree of framerate independence for physics</li>
<li>When framerate drops, Unreal will add extra physics iterations</li>
<li>Physics timestep will not exceed the max delta time</li>
</ul>
<h2 id="Collision-Detection"><a href="#Collision-Detection" class="headerlink" title="Collision Detection"></a>Collision Detection</h2><h3 id="Bounding-Volumes"><a href="#Bounding-Volumes" class="headerlink" title="Bounding Volumes"></a>Bounding Volumes</h3><p>AABB=Axis Aligned Bounding Box<br>OOBB = Object-Oriented Bounding Box<br>BVH = Bounding Volume Hierarchy</p>
<h3 id="BVH-Construction"><a href="#BVH-Construction" class="headerlink" title="BVH Construction"></a>BVH Construction</h3><p>Can be constructed top down:</p>
<ol>
<li>Compute bounding volume enclosing all of the geometry</li>
<li>Split the geometry into two or more groups</li>
<li>Compute bounding volume for each group</li>
<li>Recurse</li>
<li>Leaf nodes will enclose only one geometric primitive</li>
</ol>
<h4 id="BVH-Howto-Split"><a href="#BVH-Howto-Split" class="headerlink" title="BVH: Howto Split"></a>BVH: Howto Split</h4><ul>
<li>Can compute a centroid for each geometric primitive<ul>
<li>Split on median centroid, along longest axis</li>
<li>Split on average centroid, along longest axis</li>
</ul>
</li>
<li>More sophisticated splitting criteria can be used<ul>
<li>E.g. Surface Area Heuristic used on BVHs for ray-tracing</li>
</ul>
</li>
</ul>
<h4 id="BVH-Howto-Collide"><a href="#BVH-Howto-Collide" class="headerlink" title="BVH: Howto Collide"></a>BVH: Howto Collide</h4><ul>
<li><p>In a single BVH for scene</p>
<ul>
<li>Two geometric primitives can overlap only if their volumes overlap</li>
</ul>
</li>
<li><p>Or, BVHs can be used for each composite object (e.g. mesh)</p>
<ul>
<li>A search tree is constructed that records descent into each BVH</li>
<li>Determines if any cells overlap</li>
</ul>
</li>
</ul>
<h1 id="Introduction-to-Ray-Tracing"><a href="#Introduction-to-Ray-Tracing" class="headerlink" title="Introduction to Ray Tracing"></a>Introduction to Ray Tracing</h1><h1 id="Rendering"><a href="#Rendering" class="headerlink" title="Rendering"></a>Rendering</h1><h2 id="UE-5-Lumen"><a href="#UE-5-Lumen" class="headerlink" title="UE 5 Lumen"></a>UE 5 Lumen</h2><h3 id="Global-Illumination"><a href="#Global-Illumination" class="headerlink" title="Global Illumination"></a>Global Illumination</h3><blockquote>
<p>“Global illumination…is a group of algorithms used in 3D computer graphics that are meant to add more realistic lighting to 3D scenes. Such algorithms take into account not only the light that comes directly from a light source (direct illumination), but also subsequent cases in which light rays from the same source are reflected by other surfaces in the scene, whether reflective or not (indirect illumination).<br>Theoretically, reflections, refractions, and shadows are all examples of global illumination, because when simulating them, one object affects the rendering of another (as opposed to an object being affected only by a direct source of light). In practice, however, only the simulation of diffuse inter-reflection or caustics is called global illumination.*” — Wikipedia</p>
</blockquote>
<h3 id="Lumen"><a href="#Lumen" class="headerlink" title="Lumen"></a>Lumen</h3><p>Lumen is Unreal Engine 5’s fully dynamic global illumination and reflections system</p>
<ul>
<li>Enabled out of the box. </li>
<li>Designed for next-generation consoles</li>
<li>Supports high-end visualizations like architectural visualization<blockquote>
<p>“Lumen uses multiple ray-tracing methods to solve Global Illumination and Reflections.<br>Screen Traces are done first, followed by a more reliable method. Lumen uses Software Ray Tracing through Signed Distance Fields by default, but can achieve higher quality on supporting video cards when Hardware Ray Tracing is enabled.”</p>
</blockquote>
</li>
</ul>
<h1 id="Game-AI"><a href="#Game-AI" class="headerlink" title="Game AI"></a>Game AI</h1><h2 id="Tactical-Waypoints"><a href="#Tactical-Waypoints" class="headerlink" title="Tactical Waypoints"></a>Tactical Waypoints</h2><h3 id="Tactical-and-Strategic-AI"><a href="#Tactical-and-Strategic-AI" class="headerlink" title="Tactical and Strategic AI"></a>Tactical and Strategic AI</h3><p>Previously discuss pathfinding and decision making </p>
<ul>
<li>A*</li>
<li>Decision trees</li>
</ul>
<p>Limitations</p>
<ul>
<li>Intended for use by a single character (no intelligent coordination between characters)</li>
<li>Lack ability predict strategic or “big picture” outcomes</li>
<li>Poor utilization of environment to tactical advantage</li>
</ul>
<p>Tactical and strategic AI try to overcome these limitations</p>
<ul>
<li>Not needed in some game genres e.g. platformers or simple shooters</li>
</ul>
<h3 id="Tactical-Waypoints-1"><a href="#Tactical-Waypoints-1" class="headerlink" title="Tactical Waypoints"></a>Tactical Waypoints</h3><ul>
<li>Waypoint is a position in a game level used in pathfinding at intermediate nodes along a route</li>
<li>Can use waypoints for other kind of decision making<ul>
<li>Can add data indicating special tactical features</li>
<li>Sometimes called “rally points”</li>
<li>Examples…<ul>
<li>Safe spot designated for troops to retreat to…</li>
<li>Cover points or sniper positions</li>
<li>Heavily shadowed areas</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="Game-Design"><a href="#Game-Design" class="headerlink" title="Game Design"></a>Game Design</h1><h2 id="High-Level-Design-Process"><a href="#High-Level-Design-Process" class="headerlink" title="High-Level Design Process"></a>High-Level Design Process</h2><ul>
<li><p>Designing from a high-level vision</p>
</li>
<li><p>Analogous to other industries</p>
<ul>
<li>User types</li>
<li>User experiences</li>
<li>Systems first then features</li>
</ul>
</li>
<li><p>Getting better at the process</p>
<ul>
<li>We are a young industry<ul>
<li>Rockstar</li>
<li>Ubisoft</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Principles-of-Design"><a href="#Principles-of-Design" class="headerlink" title="Principles of Design:"></a>Principles of Design:</h2><h3 id="Starting-Points"><a href="#Starting-Points" class="headerlink" title="Starting Points"></a>Starting Points</h3><p>Design is an exercise in constraints</p>
<ul>
<li>Technical</li>
<li>Narrative/World</li>
<li>Time/Resources/Scope</li>
</ul>
<p>Player Choice as a key constraint </p>
<ul>
<li>Some games offer little choice (the designer experience)</li>
<li>Others are more-wide open</li>
</ul>
<p>Make sure you understand the project requirements</p>
<ul>
<li>Saints Row 3 and the over-developed missions/Co-op</li>
<li>Processes can be constraints<ul>
<li>“Fail Fast”</li>
</ul>
</li>
</ul>
<p>All apps/games start with an IDEA<br>There is so much more to what you want to build<br>The primary role of a designer is to clearly communicate how that IDEA fits into an App/Game (the bigger picture, the Vision)<br>What happens without that clarity? </p>
<ul>
<li>Confusion</li>
<li>Delay</li>
<li>People building to their own vs. the required standards </li>
</ul>
<p>The question is: what focuses the design, what drives the definition of the Vision?</p>
<p>Once you have an idea, set a genre and then build a world around it</p>
<ul>
<li><p>Provides Context</p>
</li>
<li><p>Provides Consistency</p>
</li>
<li><p>Expand upon the idea to provide depth</p>
<ul>
<li>An idea is a feature in most cases, a feature is not a game</li>
<li>Why is the world the way it is? Leads to new complementary ideas</li>
<li>Examples: Renegade and Red Faction Guerrilla</li>
</ul>
</li>
<li><p>Improve Immersion/Presence</p>
<ul>
<li>Most games are Skill Challenges</li>
<li>Skill develops over time, the world encourages retention</li>
<li>Interactivity can add another layer</li>
</ul>
</li>
</ul>
<p>Player Types: These define the core interests of the user we are targeting with our features.<br>Example: Minecraft</p>
<ul>
<li>The Collector: <ul>
<li>This user requires the opportunity to gather items and build a large stockpile of items. </li>
<li>The Builder:This user type enjoys creating different imaginative items from the resources available.</li>
</ul>
</li>
</ul>
<p>Define your User Experience(s): </p>
<ul>
<li>The different emotional responses we are trying to elicit with our app/game features </li>
<li>Example: We want the gamer to be in awe when they face the challenges of our world.</li>
</ul>
<h2 id="MDA"><a href="#MDA" class="headerlink" title="MDA"></a>MDA</h2><p>Mechanics: The rules and concepts that formally specify the game-as-system.<br>Dynamics: The run-time behavior of the game-as-system.<br>Aesthetics: The desirable emotional responses evoked by the game dynamics.</p>
<h3 id="8-Kinds-of-Fun"><a href="#8-Kinds-of-Fun" class="headerlink" title="8 Kinds of Fun"></a>8 Kinds of Fun</h3><ol>
<li>Sensation: Game as sense-pleasure<br>Games that evoke emotion in the player through sound, visuals, controller rumble or physical effort.</li>
<li>Fantasy: Game as make-believe<br>Game as a mean to take the player to another world, some call it escapism. </li>
<li>Narrative: Game as drama<br>Game as a mean to tell a story or narrative to the player.</li>
<li>Challenge: Game as obstacle course<br>Games that provide the player(s) with highly competitive value or with increasingly difficult challenges.</li>
<li>Fellowship: Game as social framework<br>Games that have social interactions as its core or as a big feature.</li>
<li>Discovery: Game as uncharted territory<br>Games in which the player explores the world he/she finds himself/herself in.</li>
<li>Expression: Game as self-discovery<br>Games that allow for self-expression from the player through gameplay.</li>
<li>Masochism: Game as submission<br>Games that have “farming” or “grinding” as a core element5. Fellowship: Game as social framework</li>
</ol>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference:"></a>Reference:</h1><p><a target="_blank" rel="noopener" href="https://illinois-cs415.github.io">https://illinois-cs415.github.io</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://L10yx.github.io">老钉头</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://l10yx.github.io/2024/04/29/game/">http://l10yx.github.io/2024/04/29/game/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://L10yx.github.io" target="_blank">老钉头のBlog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/CG/">CG</a></div><div class="post_share"><div class="social-share" data-image="/img/3F7B146C-C286-4CCB-AE97-4DFD69F7EDAF_1_201_a.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2024/04/23/mdp/" title="马尔科夫决策过程"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">马尔科夫决策过程</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/3F7B146C-C286-4CCB-AE97-4DFD69F7EDAF_1_201_a.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">老钉头</div><div class="author-info__description">A ZJUer majored in CompE</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/L10yx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/L10yx" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:yuxuanl.21@intl.zju.edu.cn" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎光临老钉头的博客！这里会不定期分享我在学习和工作中收集、整理和总结的信息，以及个人思考。<br>请注意，部分内容可能来源于互联网。若涉及版权问题，请及时与我联系，我将尽快处理相关内容！同时，对于任何其他问题或建议，也非常欢迎您与我交流讨论 :)<br>yuxuanl.21@intl.zju.edu.cn</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Animation"><span class="toc-number">1.</span> <span class="toc-text">Animation</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Geometric-Transformations"><span class="toc-number">1.1.</span> <span class="toc-text">Geometric Transformations</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-D-Affine-Transformations"><span class="toc-number">1.1.1.</span> <span class="toc-text">3-D Affine Transformations</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Translation"><span class="toc-number">1.1.2.</span> <span class="toc-text">Translation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scale"><span class="toc-number">1.1.3.</span> <span class="toc-text">Scale</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-D-Rotations-It%E2%80%99s-Not-Magic"><span class="toc-number">1.1.4.</span> <span class="toc-text">2-D Rotations: It’s Not Magic</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-D-Rotations"><span class="toc-number">1.1.5.</span> <span class="toc-text">3-D Rotations</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Concatenating-Transformations"><span class="toc-number">1.1.6.</span> <span class="toc-text">Concatenating Transformations</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Non-Commutativity-Example"><span class="toc-number">1.1.7.</span> <span class="toc-text">Non-Commutativity Example</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Use-in-Rigging"><span class="toc-number">1.1.8.</span> <span class="toc-text">Use in Rigging</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Orientation-Euler-Angles"><span class="toc-number">1.2.</span> <span class="toc-text">Orientation: Euler Angles</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Instancing"><span class="toc-number">1.2.1.</span> <span class="toc-text">Instancing</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Animation-and-Orientation"><span class="toc-number">1.2.2.</span> <span class="toc-text">Animation and Orientation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Orientation"><span class="toc-number">1.2.3.</span> <span class="toc-text">Orientation</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Euler-Angles"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">Euler Angles</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Gimbal-Lock"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">Gimbal Lock</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Interpolation"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">Interpolation</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Orientation-Quaternions-%E5%9B%9B%E5%85%83%E6%95%B0"><span class="toc-number">1.3.</span> <span class="toc-text">Orientation: Quaternions 四元数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Unit-Quaternions"><span class="toc-number">1.3.1.</span> <span class="toc-text">Unit Quaternions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Quaternions-as-Rotations"><span class="toc-number">1.3.2.</span> <span class="toc-text">Quaternions as Rotations</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Rotation-using-Quaternions"><span class="toc-number">1.3.3.</span> <span class="toc-text">Rotation using Quaternions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Quaternion-to-Matrix"><span class="toc-number">1.3.4.</span> <span class="toc-text">Quaternion to Matrix</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Matrix-to-Quaternion"><span class="toc-number">1.3.5.</span> <span class="toc-text">Matrix to Quaternion</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Quaternion-Dot-Products"><span class="toc-number">1.3.6.</span> <span class="toc-text">Quaternion Dot Products</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Quaternion-Multiplication"><span class="toc-number">1.3.7.</span> <span class="toc-text">Quaternion Multiplication</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linear-Interpolation"><span class="toc-number">1.3.8.</span> <span class="toc-text">Linear Interpolation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spherical-Linear-Interpolation"><span class="toc-number">1.3.9.</span> <span class="toc-text">Spherical Linear Interpolation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Quaternion-Interpolation"><span class="toc-number">1.3.10.</span> <span class="toc-text">Quaternion Interpolation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chained-Quaternion-Interpolation"><span class="toc-number">1.3.11.</span> <span class="toc-text">Chained Quaternion Interpolation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Interpolating-Quaternions-The-Hack"><span class="toc-number">1.3.12.</span> <span class="toc-text">Interpolating Quaternions: The Hack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#T-F"><span class="toc-number">1.3.13.</span> <span class="toc-text">T&#x2F;F</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Game-Physics"><span class="toc-number">2.</span> <span class="toc-text">Game Physics</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Simple-Physics-Engine"><span class="toc-number">2.1.</span> <span class="toc-text">Simple Physics Engine</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#The-Timestep"><span class="toc-number">2.1.1.</span> <span class="toc-text">The Timestep</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UE-Substepping"><span class="toc-number">2.1.2.</span> <span class="toc-text">UE Substepping</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Collision-Detection"><span class="toc-number">2.2.</span> <span class="toc-text">Collision Detection</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Bounding-Volumes"><span class="toc-number">2.2.1.</span> <span class="toc-text">Bounding Volumes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BVH-Construction"><span class="toc-number">2.2.2.</span> <span class="toc-text">BVH Construction</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#BVH-Howto-Split"><span class="toc-number">2.2.2.1.</span> <span class="toc-text">BVH: Howto Split</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BVH-Howto-Collide"><span class="toc-number">2.2.2.2.</span> <span class="toc-text">BVH: Howto Collide</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Introduction-to-Ray-Tracing"><span class="toc-number">3.</span> <span class="toc-text">Introduction to Ray Tracing</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Rendering"><span class="toc-number">4.</span> <span class="toc-text">Rendering</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#UE-5-Lumen"><span class="toc-number">4.1.</span> <span class="toc-text">UE 5 Lumen</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Global-Illumination"><span class="toc-number">4.1.1.</span> <span class="toc-text">Global Illumination</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lumen"><span class="toc-number">4.1.2.</span> <span class="toc-text">Lumen</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Game-AI"><span class="toc-number">5.</span> <span class="toc-text">Game AI</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Tactical-Waypoints"><span class="toc-number">5.1.</span> <span class="toc-text">Tactical Waypoints</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Tactical-and-Strategic-AI"><span class="toc-number">5.1.1.</span> <span class="toc-text">Tactical and Strategic AI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Tactical-Waypoints-1"><span class="toc-number">5.1.2.</span> <span class="toc-text">Tactical Waypoints</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Game-Design"><span class="toc-number">6.</span> <span class="toc-text">Game Design</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#High-Level-Design-Process"><span class="toc-number">6.1.</span> <span class="toc-text">High-Level Design Process</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Principles-of-Design"><span class="toc-number">6.2.</span> <span class="toc-text">Principles of Design:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Starting-Points"><span class="toc-number">6.2.1.</span> <span class="toc-text">Starting Points</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MDA"><span class="toc-number">6.3.</span> <span class="toc-text">MDA</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-Kinds-of-Fun"><span class="toc-number">6.3.1.</span> <span class="toc-text">8 Kinds of Fun</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Reference"><span class="toc-number">7.</span> <span class="toc-text">Reference:</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/04/29/game/" title="Game Development UIUC CS415">Game Development UIUC CS415</a><time datetime="2024-04-30T01:18:20.000Z" title="发表于 2024-04-29 20:18:20">2024-04-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/04/23/mdp/" title="马尔科夫决策过程">马尔科夫决策过程</a><time datetime="2024-04-24T00:51:05.000Z" title="发表于 2024-04-23 19:51:05">2024-04-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/04/23/391os/" title="LOS:Linux-Like Light OS Kernel">LOS:Linux-Like Light OS Kernel</a><time datetime="2024-04-23T21:17:49.000Z" title="发表于 2024-04-23 16:17:49">2024-04-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/04/23/redisbasics/" title="Redis入门">Redis入门</a><time datetime="2024-04-23T20:57:16.000Z" title="发表于 2024-04-23 15:57:16">2024-04-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/04/22/redis/" title="ACID VS BASE">ACID VS BASE</a><time datetime="2024-04-22T23:33:26.000Z" title="发表于 2024-04-22 18:33:26">2024-04-22</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2024 By 老钉头</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>